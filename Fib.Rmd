---
title: "Fibnacci sequence"
output:
  html_document:
    df_print: paged
---

Import some library
```{r, results='hide',fig.keep='all'}
library(plyr)
library(dplyr)
library(ggplot2)
library(purrr)
```

#1. Fibnacci sequence
```{r}
fib=function(len){
fibvals <- numeric(len)
fibvals[1] <- 1
fibvals[2] <- 1
for (i in 3:len) { 
  fibvals[i] <- fibvals[i-1]+fibvals[i-2]
} 
return (fibvals)
}
```

test the function with 10
```{r}
fib(10)
```



```{r}
# Program to display the Fibonacci sequence up to n-th term using recursive functions
recurse_fibonacci <- function(n) {
if(n <= 1) {
return(n)
} else {
return(recurse_fibonacci(n-1) + recurse_fibonacci(n-2))
}
}

```

test the function with 10
```{r}
recurse_fibonacci(10)
```

This is a solution found R document, which is a cleaner version of the above. But the purpose is to demonstrate the use of Recall though
```{r}
## A trivial (but inefficient!) example:
fib <- function(n)
   if(n<=2) { if(n>=0) 1 else 0 } else Recall(n-1) + Recall(n-2)
fibonacci <- fib; rm(fib)
## renaming wouldn't work without Recall
fibonacci(10) # 55
```
Stumbled upon this on stack exchange the other day, and want to just copy and paste it here for future reference.

```{r}
#naive recursive implementation
fib <- function(n)  {
  if(n == 1 || n == 2) return(1)
  fib(n-1) + fib(n-2)
}
```


```{r}
#with memoization
fibm <- function(n)  {
  if(n == 1 || n == 2) return(1)

  seq <- integer(n)
  seq[1:2] <- 1

  calc <- function(n) {
    if (seq[n] != 0) return(seq[n])
    seq[n] <<- calc(n-1) + calc(n-2)
    seq[n]
  }

  calc(n)
}

```

```{r}
fibm(20)
```


Is memoization faster?
microbenchmark(fib(20), fibm(20))
Unit: microseconds
expr      min       lq       mean    median        uq       max neval cld
fib(20)  8005.314 8804.130 9758.75325 9301.6210 9798.8500 46867.182   100   b
fibm(20)    38.991   44.798   54.12626   53.6725   60.4035    97.089   100  a 

<span style="color:blue">Fun fact: There is another problem that is basically a Fibnacci problem. </span>

<span style="color:blue">Description
You are climbing a stair case. It takes n steps to reach to the top.

<span style="color:blue">Each time you can either climb 1 or 2 steps. In how many distinct ways can you climb to the top?
<span style="color:blue">Do you know why? Try to solve it and you'll see.</span>



